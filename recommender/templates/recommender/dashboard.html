{% extends 'recommender/base.html' %}

{% block title %}Dashboard | AlignEd AI{% endblock %}

{% block content %}
<!-- Header now has the admin icon removed for a cleaner student view -->
<header class="flex justify-between items-center mb-8">
    <h1 class="text-2xl font-bold text-gray-800">Course Recommendation Dashboard</h1>
</header>

<section class="bg-indigo-700 text-white rounded-2xl p-8 mb-8 flex flex-col md:flex-row justify-between items-center text-center md:text-left">
    <div class="mb-4 md:mb-0">
        <h2 class="text-3xl font-bold mb-2">Welcome to AlignEd!</h2>
        <p class="text-indigo-200">Discover courses that match your skills and interests for your future career.</p>
    </div>
    <a href="{% url 'assessment' %}" class="bg-white text-indigo-700 font-bold py-3 px-6 rounded-lg whitespace-nowrap hover:bg-gray-200 transition-colors transform hover:scale-105">Take Assessment</a>
</section>

<!-- DYNAMIC STATS SECTION -->
<section class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
    <div class="bg-white p-6 rounded-2xl flex items-center space-x-4">
        <div class="bg-blue-100 p-3 rounded-full"><i data-feather="book-open" class="text-blue-500"></i></div>
        <div>
            <p class="text-gray-500">Available Courses</p>
            <p class="text-2xl font-bold text-gray-800">{{ available_courses_count|default:"0" }}</p>
        </div>
    </div>
    <div class="bg-white p-6 rounded-2xl flex items-center space-x-4">
        <div class="bg-green-100 p-3 rounded-full"><i data-feather="users" class="text-green-500"></i></div>
        <div>
            <p class="text-gray-500">Total Assessments Taken</p>
            <p class="text-2xl font-bold text-gray-800">{{ total_assessments_count|default:"0" }}</p>
        </div>
    </div>
    <div class="bg-white p-6 rounded-2xl flex items-center space-x-4">
        <div class="bg-purple-100 p-3 rounded-full"><i data-feather="check-circle" class="text-purple-500"></i></div>
        <div>
            <p class="text-gray-500">Model Accuracy</p>
            <p class="text-2xl font-bold text-gray-800">87.5%</p> <!-- Placeholder, can be made dynamic -->
        </div>
    </div>
</section>

<!-- DYNAMIC TRENDING COURSES SECTION -->
<section>
    <div class="flex justify-between items-center mb-4">
        <h2 class="text-xl font-bold text-gray-800">Trending Courses</h2>
        <p class="text-gray-500">Most frequently recommended by our system</p>
    </div>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        {% for course in top_recommended_courses %}
        <div class="bg-white rounded-2xl p-6 shadow-sm">
            <h3 class="font-bold text-lg text-gray-800">{{ course.recommended_course_1 }}</h3>
            <p class="text-sm text-gray-500">{{ course.count }} Recommendations</p>
        </div>
        {% empty %}
        <p class="text-gray-500 col-span-3">No assessments have been taken yet.</p>
        {% endfor %}
    </div>
</section>
{% endblock %}

